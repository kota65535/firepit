vars:
  A: 1
  B: "{{ A | int + 1 }}"
  C: true
  D: [1, 2]
  E:
    a: 1
    b: 2

tasks:
  foo:
    command: echo "foo {{ A }}"
    depends_on:
      - bar
      - baz
      - "{% if C %}qux{% endif %}"
      - quux

  bar:
    env:
      B: "{{ B | int + 1 }}"
    command: echo "bar ${B}"

  baz:
    vars:
      C: baz
    env_files:
      - .env.{{ C }}
    command: echo "baz ${C}"

  qux:
    command: echo "qux {{ D[0] }},{{ D[1] }}"

  quux:
    command: echo "quux {{ E['a'] }},{{ E['b'] }}"
